{"remainingRequest":"C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\src\\views\\auth\\AuthRedirectPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\src\\views\\auth\\AuthRedirectPage.vue","mtime":1646452243167},{"path":"C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1643426032229},{"path":"C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643426027151},{"path":"C:\\Users\\GreatHope\\Documents\\deploy\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1643426033742}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOw0KaW1wb3J0IGNvbmZpZyBmcm9tICcuLi8uLi9jb25maWcvY29uZmlnJw0KaW1wb3J0IHsgbWFwTXV0YXRpb25zIH0gZnJvbSAidnVleCI7DQppbXBvcnQgcm91dGVyIGZyb20gJy4uLy4uL3JvdXRlcicNCiAgZXhwb3J0IGRlZmF1bHQgew0KICAgICANCiAgIGRhdGEoKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICAgcG9zdHM6IFtdDQogICAgICB9DQogICB9LA0KICAgIA0KICAgbWV0aG9kczogew0KICAgICAgLi4ubWFwTXV0YXRpb25zKFsic2V0VXNlciIsICJzZXRUb2tlbiJdKSwNCiAgICAgICBTZW5kQ29uZmlybUNvZGUoKSB7DQogICAgICAgICBjb25zb2xlLmxvZygnZ2V0dG9rZW4nKTsNCiAgICAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsNCiAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlTdHJpbmcpOw0KICAgICAgICAgY29uc3QgY29uZmlybWF0aW9uX2NvZGUgPSB1cmxQYXJhbXMuZ2V0KCdjb25maXJtYXRpb25fY29kZScpDQogICAgICAgICBjb25zb2xlLmxvZyhjb25maXJtYXRpb25fY29kZSkNCiAgICAgICAgIGF4aW9zDQogICAgICAgIC5nZXQoY29uZmlnLmJhc2VVcmwrIi9hcGkvYXV0aC9jb25maXJtLyIuY29uY2F0KGNvbmZpcm1hdGlvbl9jb2RlKSkNCiAgICAgICAgLnRoZW4oYXN5bmMgcmVzID0+IHsNCiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHJlcyk7DQoNCiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSB7DQogICAgICAgICAgICAgICBpZCA6IHJlcy5kYXRhLmlkLA0KICAgICAgICAgICAgICAgbmFtZTogcmVzLmRhdGEubmFtZSwNCiAgICAgICAgICAgICAgIGVtYWlsOiByZXMuZGF0YS5lbWFpbCwNCiAgICAgICAgICAgICAgIGJpbzogcmVzLmRhdGEuYmlvLA0KICAgICAgICAgICAgICAgc29jaWFsX25vdGlmaWNhdGlvbjogZmFsc2UsDQogICAgICAgICAgICAgICBwaG90bzogcmVzLmRhdGEucGhvdG8sDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgY29uc3QgdG9rZW4gPSB7DQogICAgICAgICAgICAgICB0b2tlbjogcmVzLmRhdGEuYWNjZXNzVG9rZW4sDQogICAgICAgICAgICAgICByZWZyZXNoVG9rZW46IHJlcy5kYXRhLnJlZnJlc2hUb2tlbg0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFVzZXInLCB1c2VyKQ0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldFRva2VuJywgdG9rZW4pDQogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnc2V0TG9nZ2VkSW4nLCB0cnVlKTsNCg0KICAgICAgICAgICAgcm91dGVyLnB1c2goJy9kYXNoYm9hcmQnKQ0KICAgICAgICB9KQ0KICAgICAgICAuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJGYWlsZWQgdG8gcmVnaXN0ZXIuIENvbmZpcm0gYWNjb3VudCBpbmZvLiIpOw0KICAgICAgICB9KTsNCiAgICAgICB9LA0KICAgICAgIA0KICAgIH0sDQoNCiAgIG1vdW50ZWQoKSB7ICAgICAgIA0KICAgICAgdGhpcy5TZW5kQ29uZmlybUNvZGUoKTsNCiAgICB9LA0KICB9DQo="},{"version":3,"sources":["AuthRedirectPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"AuthRedirectPage.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\r\n<v-app>\r\n   <v-card color=\"grey lighten-4\" flat  tile>\r\n      <v-toolbar dense>                 \r\n         <v-toolbar-title ><div class=\"font-weight-medium\">Medium</div></v-toolbar-title>         \r\n         <v-spacer></v-spacer>\r\n         <router-link to=\"/login\" tag=\"div\">\r\n            <v-btn class=\"ma-2\"  outlined  color=\"#009688\">SingIn</v-btn>\r\n         </router-link>\r\n         <router-link to=\"/register\" tag=\"div\">\r\n            <v-btn class=\"ma-2\" outlined color=\"#2979FF\">GetStarted</v-btn>\r\n         </router-link>\r\n      </v-toolbar>\r\n   </v-card> \r\n</v-app>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport config from '../../config/config'\r\nimport { mapMutations } from \"vuex\";\r\nimport router from '../../router'\r\n  export default {\r\n     \r\n   data() {\r\n      return {\r\n         posts: []\r\n      }\r\n   },\r\n    \r\n   methods: {\r\n      ...mapMutations([\"setUser\", \"setToken\"]),\r\n       SendConfirmCode() {\r\n         console.log('gettoken');\r\n         const queryString = window.location.search;\r\n         const urlParams = new URLSearchParams(queryString);\r\n         const confirmation_code = urlParams.get('confirmation_code')\r\n         console.log(confirmation_code)\r\n         axios\r\n        .get(config.baseUrl+\"/api/auth/confirm/\".concat(confirmation_code))\r\n        .then(async res => {\r\n            // console.log(res);\r\n\r\n            const user = {\r\n               id : res.data.id,\r\n               name: res.data.name,\r\n               email: res.data.email,\r\n               bio: res.data.bio,\r\n               social_notification: false,\r\n               photo: res.data.photo,\r\n            };\r\n            const token = {\r\n               token: res.data.accessToken,\r\n               refreshToken: res.data.refreshToken\r\n            }\r\n            this.$store.dispatch('setUser', user)\r\n            this.$store.dispatch('setToken', token)\r\n            this.$store.dispatch('setLoggedIn', true);\r\n\r\n            router.push('/dashboard')\r\n        })\r\n        .catch(() => {\r\n          console.log(\"Failed to register. Confirm account info.\");\r\n        });\r\n       },\r\n       \r\n    },\r\n\r\n   mounted() {       \r\n      this.SendConfirmCode();\r\n    },\r\n  }\r\n</script>\r\n"]}]}