{"remainingRequest":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\src\\service\\axios.js","dependencies":[{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\src\\service\\axios.js","mtime":1644482217408},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\babel.config.js","mtime":1643429729254},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643426027151},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\babel-loader\\lib\\index.js","mtime":1643426032229},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\eslint-loader\\index.js","mtime":1643426028315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcR3JlYXRIb3BlXFxEb2N1bWVudHNcXHZ1ZV9wcmFjdGljZVxcdnVlX3Byb2plY3RcXHNlY29uZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBWdWVDb29raWVzIGZyb20gJ3Z1ZS1jb29raWVzJzsKaW1wb3J0IHsgcmVmcmVzaFRva2VuIH0gZnJvbSAnLi4vc2VydmljZS9sb2dpbic7CmF4aW9zLmRlZmF1bHRzLmJhc2VVUkwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAwJzsgLy8gQWRkIGEgcmVxdWVzdCBpbnRlcmNlcHRvcgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGNvbmZpZykgewogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBEbyBzb21ldGhpbmcgYmVmb3JlIHJlcXVlc3QgaXMgc2VudAogICAgICAgICAgICBjb25maWcuaGVhZGVycy50b2tlbiA9IFZ1ZUNvb2tpZXMuZ2V0KCd0b2tlbicpOwogICAgICAgICAgICBjb25maWcuaGVhZGVycy5yZWZyZXNoX3Rva2VuID0gVnVlQ29va2llcy5nZXQoJ3JlZnJlc2hfdG9rZW4nKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY29uZmlnKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY29uZmlnKTsKCiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVxdWVzdCBlcnJvcgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOyAvLyBBZGQgYSByZXNwb25zZSBpbnRlcmNlcHRvcgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAvLyBBbnkgc3RhdHVzIGNvZGUgdGhhdCBsaWUgd2l0aGluIHRoZSByYW5nZSBvZiAyeHggY2F1c2UgdGhpcyBmdW5jdGlvbiB0byB0cmlnZ2VyCiAgLy8gRG8gc29tZXRoaW5nIHdpdGggcmVzcG9uc2UgZGF0YQogIHJldHVybiByZXNwb25zZTsKfSwgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICB2YXIgX3JlZjIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKGVycm9yKSB7CiAgICB2YXIgZXJyb3JBUEk7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBBbnkgc3RhdHVzIGNvZGVzIHRoYXQgZmFsbHMgb3V0c2lkZSB0aGUgcmFuZ2Ugb2YgMnh4IGNhdXNlIHRoaXMgZnVuY3Rpb24gdG8gdHJpZ2dlcgogICAgICAgICAgICAvLyBEbyBzb21ldGhpbmcgd2l0aCByZXNwb25zZSBlcnJvcgogICAgICAgICAgICBjb25zb2xlLmxvZygn7JeQ65+s7J28IOqyveyasCcsIGVycm9yLmNvbmZpZyk7CiAgICAgICAgICAgIGVycm9yQVBJID0gZXJyb3IuY29uZmlnOwoKICAgICAgICAgICAgaWYgKCEoZXJyb3IucmVzcG9uc2UuZGF0YS5zdGF0dXMgPT09IDQwMSAmJiBlcnJvckFQSS5yZXRyeSA9PT0gdW5kZWZpbmVkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVycm9yQVBJLnJldHJ5ID0gdHJ1ZTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+2GoO2BsOydtCDsnbTsg4HtlZwg7Jik66WY7J28IOqyveyasCcpOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgIHJldHVybiByZWZyZXNoVG9rZW4oKTsKCiAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgcmV0dXJuIGF4aW9zKGVycm9yQVBJKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDIuc2VudCk7CgogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KGVycm9yKSk7CgogICAgICAgICAgY2FzZSAxMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZTIpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgIHJldHVybiBfcmVmMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKSk7CmV4cG9ydCBkZWZhdWx0IGF4aW9zOw=="},{"version":3,"sources":["C:/Users/GreatHope/Documents/vue_practice/vue_project/second/src/service/axios.js"],"names":["axios","VueCookies","refreshToken","defaults","baseURL","interceptors","request","use","config","headers","token","get","refresh_token","console","log","error","Promise","reject","response","errorAPI","data","status","retry","undefined"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,SAASC,YAAT,QAA6B,kBAA7B;AAEAF,KAAK,CAACG,QAAN,CAAeC,OAAf,GAAyB,uBAAzB,C,CAEA;;AACAJ,KAAK,CAACK,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B;AAAA,qEAA+B,iBAAgBC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAC3B;AACAA,YAAAA,MAAM,CAACC,OAAP,CAAeC,KAAf,GAAuBT,UAAU,CAACU,GAAX,CAAe,OAAf,CAAvB;AACAH,YAAAA,MAAM,CAACC,OAAP,CAAeG,aAAf,GAA+BX,UAAU,CAACU,GAAX,CAAe,eAAf,CAA/B;AAEAE,YAAAA,OAAO,CAACC,GAAR,CAAYN,MAAZ;AAL2B,6CAMpBA,MANoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/B;;AAAA;AAAA;AAAA;AAAA,KAOK,UAAUO,KAAV,EAAiB;AAClB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVH,E,CAYA;;AACAf,KAAK,CAACK,YAAN,CAAmBa,QAAnB,CAA4BX,GAA5B,CAAgC,UAAUW,QAAV,EAAoB;AAChD;AACA;AACA,SAAOA,QAAP;AACD,CAJH;AAAA,sEAIK,kBAAgBH,KAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACD;AACA;AACAF,YAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBC,KAAK,CAACP,MAA5B;AACMW,YAAAA,QAJL,GAIgBJ,KAAK,CAACP,MAJtB;;AAAA,kBAKEO,KAAK,CAACG,QAAN,CAAeE,IAAf,CAAoBC,MAApB,KAA6B,GAA7B,IAAoCF,QAAQ,CAACG,KAAT,KAAiBC,SALvD;AAAA;AAAA;AAAA;;AAMCJ,YAAAA,QAAQ,CAACG,KAAT,GAAiB,IAAjB;AACAT,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AAPD;AAAA,mBAQOZ,YAAY,EARnB;;AAAA;AAAA;AAAA,mBAScF,KAAK,CAACmB,QAAD,CATnB;;AAAA;AAAA;;AAAA;AAAA,8CAWMH,OAAO,CAACC,MAAR,CAAeF,KAAf,CAXN;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAJL;;AAAA;AAAA;AAAA;AAAA;AAmBA,eAAef,KAAf","sourcesContent":["import axios from 'axios';\r\nimport VueCookies from 'vue-cookies';\r\nimport { refreshToken } from '../service/login'\r\n\r\naxios.defaults.baseURL = 'http://localhost:3000';\r\n\r\n// Add a request interceptor\r\naxios.interceptors.request.use(async function (config) {\r\n    // Do something before request is sent\r\n    config.headers.token = VueCookies.get('token');\r\n    config.headers.refresh_token = VueCookies.get('refresh_token');\r\n  \r\n    console.log(config);\r\n    return config;\r\n  }, function (error) {\r\n    // Do something with request error\r\n    return Promise.reject(error);\r\n  });\r\n\r\n// Add a response interceptor\r\naxios.interceptors.response.use(function (response) {\r\n    // Any status code that lie within the range of 2xx cause this function to trigger\r\n    // Do something with response data\r\n    return response;\r\n  }, async function (error) {\r\n    // Any status codes that falls outside the range of 2xx cause this function to trigger\r\n    // Do something with response error\r\n    console.log('에러일 경우', error.config);\r\n    const errorAPI = error.config;\r\n    if(error.response.data.status===401 && errorAPI.retry===undefined){\r\n      errorAPI.retry = true;\r\n      console.log('토큰이 이상한 오류일 경우');\r\n      await refreshToken();\r\n      return await axios(errorAPI);\r\n    }\r\n    return Promise.reject(error);\r\n  });\r\n\r\n\r\nexport default axios;"]}]}