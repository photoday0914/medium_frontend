{"remainingRequest":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\src\\router.js","dependencies":[{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\src\\router.js","mtime":1644481636369},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\babel.config.js","mtime":1643429729254},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1643426027151},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\babel-loader\\lib\\index.js","mtime":1643426032229},{"path":"C:\\Users\\GreatHope\\Documents\\vue_practice\\vue_project\\second\\node_modules\\eslint-loader\\index.js","mtime":1643426028315}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6XFxVc2Vyc1xcR3JlYXRIb3BlXFxEb2N1bWVudHNcXHZ1ZV9wcmFjdGljZVxcdnVlX3Byb2plY3RcXHNlY29uZFxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IFZ1ZUNvb2tpZXMgZnJvbSAndnVlLWNvb2tpZXMnOwppbXBvcnQgTGFuZGluZ1BhZ2UgZnJvbSAnLi92aWV3cy9MYW5kaW5nUGFnZSc7CmltcG9ydCBMb2dpblBhZ2UgZnJvbSAnLi92aWV3cy9hdXRoL0xvZ2luUGFnZSc7CmltcG9ydCBSZWdpc3RlclBhZ2UgZnJvbSAnLi92aWV3cy9hdXRoL1JlZ2lzdGVyUGFnZSc7CmltcG9ydCBMb2dpblJlZGlyZWN0UGFnZSBmcm9tICcuL3ZpZXdzL2F1dGgvTG9naW5SZWRpcmVjdFBhZ2UnOwpWdWUudXNlKFZ1ZVJvdXRlcik7CnZhciByb3V0ZXMgPSBbewogIHBhdGg6ICcvJywKICBjb21wb25lbnQ6IExhbmRpbmdQYWdlCn0sIHsKICBwYXRoOiAnL2xvZ2luJywKICBjb21wb25lbnQ6IExvZ2luUGFnZQp9LCB7CiAgcGF0aDogJy9yZWdpc3RlcicsCiAgY29tcG9uZW50OiBSZWdpc3RlclBhZ2UKfSwgewogIHBhdGg6ICcvbG9naW4tcmVkaXJlY3QnLAogIGNvbXBvbmVudDogTG9naW5SZWRpcmVjdFBhZ2UKfSAvLyB7IHBhdGg6ICcqJywgcmVkaXJlY3Q6ICcvJyB9Cl07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAiaGlzdG9yeSIsCiAgcm91dGVzOiByb3V0ZXMKfSk7CnJvdXRlci5iZWZvcmVFYWNoKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHRvLCBmcm9tLCBuZXh0KSB7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghKFZ1ZUNvb2tpZXMuZ2V0KCd0b2tlbicpID09PSBudWxsICYmIFZ1ZUNvb2tpZXMuZ2V0KCdyZWZyZXNoX3Rva2VuJykgIT09IG51bGwpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gcmVmcmVzaFRva2VuKCk7CgogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBpZiAoISh0by5tYXRjaGVkLnNvbWUoZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgICAgICAgIHJldHVybiByZWNvcmQubWV0YS51bmF1dGhvcml6ZWQ7CiAgICAgICAgICAgIH0pIHx8IFZ1ZUNvb2tpZXMuZ2V0KCd0b2tlbicpKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCkpOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgYWxlcnQoJ1BsZWFzZSBsb2dpbicpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBuZXh0KCcvbG9naW4nKSk7CgogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKCiAgcmV0dXJuIGZ1bmN0aW9uIChfeCwgX3gyLCBfeDMpIHsKICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgfTsKfSgpKTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["C:/Users/GreatHope/Documents/vue_practice/vue_project/second/src/router.js"],"names":["Vue","VueRouter","VueCookies","LandingPage","LoginPage","RegisterPage","LoginRedirectPage","use","routes","path","component","router","mode","beforeEach","to","from","next","get","refreshToken","matched","some","record","meta","unauthorized","alert"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AAGA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,YAAP,MAAyB,2BAAzB;AACA,OAAOC,iBAAP,MAA8B,gCAA9B;AAEAN,GAAG,CAACO,GAAJ,CAAQN,SAAR;AAEA,IAAMO,MAAM,GAAG,CACb;AAAEC,EAAAA,IAAI,EAAE,GAAR;AAAaC,EAAAA,SAAS,EAAEP;AAAxB,CADa,EAEb;AAAEM,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,SAAS,EAAEN;AAA7B,CAFa,EAGb;AAAEK,EAAAA,IAAI,EAAE,WAAR;AAAqBC,EAAAA,SAAS,EAAEL;AAAhC,CAHa,EAIb;AAAEI,EAAAA,IAAI,EAAE,iBAAR;AAA2BC,EAAAA,SAAS,EAAEJ;AAAtC,CAJa,CAKb;AALa,CAAf;AAQA,IAAMK,MAAM,GAAG,IAAIV,SAAJ,CAAc;AAC3BW,EAAAA,IAAI,EAAE,SADqB;AAE3BJ,EAAAA,MAAM,EAANA;AAF2B,CAAd,CAAf;AAKAG,MAAM,CAACE,UAAP;AAAA,qEAAmB,iBAAMC,EAAN,EAAUC,IAAV,EAAgBC,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEdd,UAAU,CAACe,GAAX,CAAe,OAAf,MAA0B,IAA1B,IAAkCf,UAAU,CAACe,GAAX,CAAe,eAAf,MAAoC,IAFxD;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAGTC,YAAY,EAHH;;AAAA;AAAA,kBAMbJ,EAAE,CAACK,OAAH,CAAWC,IAAX,CAAgB,UAAAC,MAAM;AAAA,qBAAIA,MAAM,CAACC,IAAP,CAAYC,YAAhB;AAAA,aAAtB,KAAuDrB,UAAU,CAACe,GAAX,CAAe,OAAf,CAN1C;AAAA;AAAA;AAAA;;AAAA,6CAORD,IAAI,EAPI;;AAAA;AAUfQ,YAAAA,KAAK,CAAC,cAAD,CAAL;AAVe,6CAWRR,IAAI,CAAC,QAAD,CAXI;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAnB;;AAAA;AAAA;AAAA;AAAA;AAcA,eAAeL,MAAf","sourcesContent":["import Vue from 'vue';\r\nimport VueRouter from \"vue-router\";\r\nimport VueCookies from 'vue-cookies'\r\n\r\n\r\nimport LandingPage from './views/LandingPage'\r\nimport LoginPage from './views/auth/LoginPage'\r\nimport RegisterPage from './views/auth/RegisterPage'\r\nimport LoginRedirectPage from './views/auth/LoginRedirectPage'\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  { path: '/', component: LandingPage },\r\n  { path: '/login', component: LoginPage },\r\n  { path: '/register', component: RegisterPage },  \r\n  { path: '/login-redirect', component: LoginRedirectPage},\r\n  // { path: '*', redirect: '/' }\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: \"history\",\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach( async(to, from, next) => {\r\n\r\n  if(VueCookies.get('token')===null && VueCookies.get('refresh_token') !== null){\r\n    await refreshToken();\r\n  }\r\n\r\n  if (to.matched.some(record => record.meta.unauthorized) || VueCookies.get('token')){\r\n    return next();\r\n  }\r\n\r\n    alert('Please login');\r\n    return next('/login');\r\n})\r\n\r\nexport default router;"]}]}